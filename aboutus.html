<!doctype html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>About Us - Study Group</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
      /* --- Reset & Global --- */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Kanit", sans-serif;
      }

      body {
        background-color: #f8f9fa;
        color: #333;
        overflow-y: scroll;
      }

      :root {
        --primary-pink: #fa4299;
        --hover-pink: #ff2d78;
      }

      /* --- Navbar CSS --- */
      nav {
        height: 80px;
        background: #fff;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 40px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .nav-left {
        display: flex;
        align-items: center;
        gap: 15px;
      }
      .nav-logo img {
        height: 45px;
        display: block;
      }

      .nav-menu {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 40px;
      }
      .nav-menu a {
        text-decoration: none;
        color: #555;
        font-size: 16px;
        font-weight: 500;
        padding: 8px 12px;
        transition: all 0.3s ease;
      }
      .nav-menu a:hover,
      .nav-menu a.active {
        color: #ff2d78;
        background: #fff0f5;
        border-radius: 8px;
      }

      .nav-right {
        display: flex;
        align-items: center;
        gap: 15px;
        position: relative;
      }

      .btn-login {
        border: 2px solid #333;
        color: #333 !important;
        padding: 8px 20px;
        border-radius: 30px;
        font-weight: 600;
        text-decoration: none;
        transition: 0.3s;
      }
      .btn-login:hover {
        background: #333;
        color: white !important;
      }

      @media (max-width: 1000px) {
        .nav-menu {
          display: none;
        }
      }

      /* --- Notification Styles --- */
      .noti-icon-container {
        position: relative;
        cursor: pointer;
        margin-right: 15px;
      }
      .noti-icon {
        font-size: 24px;
        color: #555;
        transition: 0.3s;
      }
      .noti-icon:hover {
        color: #ff2d78;
        transform: rotate(15deg);
      }
      .noti-badge {
        position: absolute;
        top: -5px;
        right: -5px;
        background: #ff2d78;
        color: white;
        font-size: 10px;
        font-weight: bold;
        min-width: 18px;
        height: 18px;
        border-radius: 50%;
        display: none;
        justify-content: center;
        align-items: center;
        border: 2px solid white;
      }
      .noti-dropdown {
        position: absolute;
        top: 45px;
        right: -10px;
        width: 320px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        z-index: 2000;
        overflow: hidden;
        display: none;
        border: 1px solid #eee;
      }
      .noti-dropdown.active {
        display: block;
        animation: fadeInDrop 0.2s ease;
      }
      @keyframes fadeInDrop {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .noti-header {
        background: #ff2d78;
        color: white;
        padding: 12px 15px;
        font-weight: 600;
        font-size: 14px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .noti-content {
        max-height: 300px;
        overflow-y: auto;
      }
      .noti-item {
        padding: 12px 15px;
        border-bottom: 1px solid #f0f0f0;
        display: flex;
        gap: 10px;
        align-items: start;
        transition: 0.2s;
        cursor: pointer;
      }
      .noti-item:hover {
        background: #fff0f5;
      }
      .noti-item.unread {
        background: #fdfdfd;
        border-left: 4px solid #ff2d78;
      }
      .noti-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
      }
      .noti-text {
        font-size: 13px;
        color: #333;
      }
      .noti-text strong {
        color: #ff2d78;
      }
      .noti-time {
        font-size: 11px;
        color: #999;
        margin-top: 4px;
        display: block;
      }
      .no-noti {
        padding: 20px;
        text-align: center;
        color: #aaa;
        font-size: 13px;
      }

      /* --- About Us Specific Styles --- */
      .container {
        max-width: 1100px;
        margin: 40px auto;
        padding: 0 20px;
      }

      .about-header {
        text-align: center;
        margin-bottom: 50px;
      }
      .about-title {
        font-size: 36px;
        font-weight: 700;
        color: #333;
        margin-bottom: 10px;
      }
      .about-subtitle {
        font-size: 18px;
        color: #777;
        max-width: 600px;
        margin: 0 auto;
      }

      .content-box {
        background: white;
        border-radius: 15px;
        padding: 40px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.03);
        margin-bottom: 30px;
      }

      .section-title {
        font-size: 24px;
        font-weight: 600;
        color: var(--primary-pink);
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .text-content {
        font-size: 16px;
        color: #555;
        line-height: 1.8;
        text-align: center;
        max-width: 800px;
        margin: 0 auto;
      }

      /* Team Grid */
      .team-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 30px;
        margin-top: 30px;
      }

      .team-card {
        background: #fff;
        border: 1px solid #eee;
        border-radius: 12px;
        padding: 30px 20px;
        text-align: center;
        transition: 0.3s;
        position: relative;
        overflow: hidden;
      }
      .team-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(250, 66, 153, 0.15);
        border-color: var(--primary-pink);
      }

      .team-img {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
        margin-bottom: 15px;
        border: 3px solid #ffe6f0;
      }
      .team-name {
        font-size: 18px;
        font-weight: 600;
        color: #333;
        margin-bottom: 5px;
      }
      .team-role {
        font-size: 14px;
        color: var(--primary-pink);
        font-weight: 500;
      }

      /* ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ä‡∏ó‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î */
      .btn-team-chat {
        margin-top: 10px;
        padding: 6px 15px;
        border: 1px solid #fa4299;
        background: white;
        color: #fa4299;
        border-radius: 20px;
        cursor: pointer;
        font-size: 13px;
        transition: 0.3s;
      }
      .btn-team-chat:hover {
        background: #fa4299;
        color: white;
      }

      /* Advisor Card */
      .advisor-section {
        display: flex;
        justify-content: center;
        margin-top: 20px;
      }
      .advisor-card {
        max-width: 350px;
        width: 100%;
        background: linear-gradient(135deg, #fff 0%, #fffbfd 100%);
        border: 2px solid #ffd700;
      }
      .advisor-card .team-role {
        background: #fff9c4;
        color: #fbc02d;
        padding: 4px 12px;
        border-radius: 20px;
      }

      /* Contact Box */
      .contact-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
        margin-top: 20px;
      }
      .contact-pill {
        display: flex;
        align-items: center;
        gap: 10px;
        background: #f8f9fa;
        padding: 10px 20px;
        border-radius: 30px;
        font-size: 15px;
        color: #555;
        transition: 0.2s;
      }
      .contact-pill:hover {
        background: var(--primary-pink);
        color: white;
        transform: scale(1.05);
      }
      .contact-pill i {
        font-size: 18px;
      }

      /* --- CHAT CSS --- */
      .chat-toggle-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 60px;
        height: 60px;
        background: #fa4299;
        color: white;
        border-radius: 50%;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 24px;
        cursor: pointer;
        z-index: 9999;
        transition: transform 0.3s;
      }
      .chat-toggle-btn:hover {
        transform: scale(1.1);
      }

      .chat-box {
        position: fixed;
        bottom: 90px;
        right: 20px;
        width: 340px;
        height: 500px;
        background: white;
        border-radius: 16px;
        box-shadow: 0 5px 30px rgba(0, 0, 0, 0.15);
        display: none;
        flex-direction: column;
        overflow: hidden;
        z-index: 9999;
        border: 1px solid #eee;
      }

      /* Chat Header */
      .chat-header {
        background: #fa4299;
        color: white;
        padding: 15px;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 60px;
      }
      .chat-header-user {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .chat-header-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: white;
        border: 2px solid white;
      }
      .chat-back-btn {
        cursor: pointer;
        font-size: 18px;
        margin-right: 10px;
        display: none;
      }
      .chat-close {
        cursor: pointer;
        font-size: 20px;
        opacity: 0.8;
      }
      .chat-close:hover {
        opacity: 1;
      }

      /* Views */
      .view-section {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      /* Inbox View */
      .inbox-list {
        flex: 1;
        overflow-y: auto;
      }
      .inbox-item {
        display: flex;
        align-items: center;
        padding: 12px 15px;
        border-bottom: 1px solid #f5f5f5;
        cursor: pointer;
        transition: 0.2s;
      }
      .inbox-item:hover {
        background: #fff0f5;
      }
      .inbox-avatar {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        margin-right: 12px;
        object-fit: cover;
        border: 1px solid #eee;
      }
      .inbox-info {
        flex: 1;
        min-width: 0;
      }
      .inbox-name {
        font-weight: 600;
        font-size: 14px;
        color: #333;
        margin-bottom: 3px;
      }
      .inbox-last-msg {
        font-size: 12px;
        color: #888;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      /* Messages View */
      .chat-messages {
        flex: 1;
        padding: 15px;
        overflow-y: auto;
        background: #f9f9f9;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .msg-row {
        display: flex;
        align-items: flex-end;
        gap: 8px;
      }
      .msg-row.me {
        flex-direction: row-reverse;
      }
      .msg-avatar {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        object-fit: cover;
      }
      .msg-bubble {
        max-width: 75%;
        padding: 8px 14px;
        border-radius: 18px;
        font-size: 14px;
        word-wrap: break-word;
        position: relative;
      }
      .msg-row.other .msg-bubble {
        background: #e4e6eb;
        color: #333;
        border-bottom-left-radius: 4px;
      }
      .msg-row.me .msg-bubble {
        background: #fa4299;
        color: white;
        border-bottom-right-radius: 4px;
      }
      .msg-time {
        font-size: 10px;
        color: #aaa;
        margin-top: 2px;
      }
      .msg-row.me .msg-time {
        text-align: right;
      }

      .chat-input-area {
        padding: 12px;
        border-top: 1px solid #eee;
        background: white;
        display: flex;
        gap: 8px;
        align-items: center;
      }
      .chat-input {
        flex: 1;
        border: 1px solid #ddd;
        border-radius: 20px;
        padding: 8px 15px;
        outline: none;
        background: #f0f2f5;
      }
      .chat-input:focus {
        border-color: #fa4299;
        background: white;
      }
      .chat-send-btn {
        background: transparent;
        color: #fa4299;
        border: none;
        font-size: 20px;
        cursor: pointer;
        padding: 5px;
        transition: 0.2s;
      }
      .chat-send-btn:hover {
        transform: scale(1.1);
      }
    </style>
  </head>
  <body>
    <nav>
      <div class="nav-left">
        <a href="main.html" class="nav-logo">
          <img
            src="images/Logo.png"
            alt="Logo"
            onerror="this.src = 'https://via.placeholder.com/150x50?text=LOGO'"
          />
        </a>
      </div>

      <div class="nav-menu">
        <a href="main.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
        <a href="dashboard.html">‡∏ö‡∏≠‡∏£‡πå‡∏î</a>
        <a href="tutor.html">‡∏ú‡∏π‡πâ‡∏Ñ‡∏ô</a>
        <a href="aboutus.html" class="active">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö</a>
        <a href="feed.html">‡πÇ‡∏û‡∏™‡∏ï‡πå</a>
        <a href="ebook.html">E-Book</a>
      </div>

      <div class="nav-right" id="navRightContent">
        <a href="login.html" class="btn-login">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
      </div>
    </nav>

    <template id="loggedInTemplate">
      <div class="noti-icon-container" onclick="toggleNotification(event)">
        <i class="fas fa-bell noti-icon"></i>
        <span class="noti-badge" id="notiCount">0</span>

        <div class="noti-dropdown" id="notiDropdown">
          <div class="noti-header">
            <span>‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</span>
            <span
              style="cursor: pointer; font-size: 12px"
              onclick="markAllRead()"
              >‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span
            >
          </div>
          <div class="noti-content" id="notiList">
            <div class="no-noti">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
          </div>
        </div>
      </div>

      <div
        style="display: flex; align-items: center; gap: 10px; cursor: pointer"
        onclick="window.location.href = 'profile.html'"
      >
        <img
          id="userAvatar"
          src="images/default-avatar.png"
          style="
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #ff2d78;
            object-fit: cover;
          "
        />
        <span id="userName" style="font-weight: 600; color: #333"
          >Username</span
        >
      </div>

      <a
        href="#"
        onclick="logout()"
        style="color: #888; font-size: 18px; margin-left: 10px"
        title="‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö"
        ><i class="fas fa-sign-out-alt"></i
      ></a>
    </template>

    <div class="container">
      <div class="about-header">
        <div class="about-title">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤ Study Group</div>
        <div class="about-subtitle">
          ‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ñ‡∏≠‡∏°‡∏°‡∏π‡∏ô‡∏¥‡∏ï‡∏µ‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡∏£‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ ‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ï‡∏¥‡∏ß ‡∏´‡∏≤‡∏ï‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå
          ‡πÅ‡∏•‡∏∞‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ
        </div>
      </div>

      <div class="content-box">
        <div class="section-title">
          <i class="fas fa-bullseye"></i> ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤
        </div>
        <div class="text-content">
          <p>
            Study Group ‡∏Å‡πà‡∏≠‡∏ï‡∏±‡πâ‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏•‡∏≤‡∏á (Community)
            ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ ‡πÅ‡∏•‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡πÉ‡∏à‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ
            ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏û‡∏ö‡∏õ‡∏∞‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢ ‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ ‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ã‡∏∂‡πà‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏±‡∏ô
          </p>
          <br />
          <h3 style="color: #333; font-style: italic">
            " ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô <br />
            ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÅ‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏™‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô "
          </h3>
          <br />
          <p>
            ‡πÄ‡∏£‡∏≤‡∏à‡∏∂‡∏á‡∏°‡∏∏‡πà‡∏á‡∏°‡∏±‡πà‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏á‡πà‡∏≤‡∏¢ ‡∏™‡∏ô‡∏∏‡∏Å
            ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏°‡∏≤‡∏Å‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô
          </p>
        </div>
      </div>

      <div class="content-box">
        <div class="section-title"><i class="fas fa-code"></i> ‡∏ó‡∏µ‡∏°‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤</div>
        <div class="text-content" style="margin-bottom: 20px">
          ‡∏û‡∏ß‡∏Å‡πÄ‡∏£‡∏≤‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏î‡πá‡∏Å‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡πÄ‡∏ï‡πá‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤ (STEM Education)<br />
          <b>‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏ç‡πÇ‡∏ç‡∏õ‡∏ñ‡∏±‡∏°‡∏†‡πå ‡∏•‡∏≥‡∏û‡∏π‡∏ô</b>
        </div>

        <div class="team-grid">
          <div class="team-card">
            <img
              src="images/Pee.jpg"
              class="team-img"
              alt="Pee"
              onerror="
                this.src =
                  'https://cdn-icons-png.flaticon.com/512/4140/4140048.png'
              "
            />
            <div class="team-name">‡∏ô‡∏≤‡∏¢‡∏û‡∏µ‡∏£‡∏ß‡∏¥‡∏ä‡∏ç‡πå ‡∏°‡∏∞‡πÇ‡∏ô‡∏ä‡∏°‡∏†‡∏π</div>
            <div class="team-role">UX/UI Designer</div>
            <button
              class="btn-team-chat"
              onclick="
                startChatWithUser('team_pee', '‡∏û‡∏µ‡∏£‡∏ß‡∏¥‡∏ä‡∏ç‡πå', 'images/Pee.jpg')
              "
            >
              <i class="fas fa-comment-dots"></i> ‡πÅ‡∏ä‡∏ó‡πÄ‡∏•‡∏¢
            </button>
          </div>

          <div class="team-card">
            <img
              src="images/Sunny.jpg"
              class="team-img"
              alt="Sunny"
              onerror="
                this.src =
                  'https://cdn-icons-png.flaticon.com/512/4140/4140037.png'
              "
            />
            <div class="team-name">‡∏ô‡∏≤‡∏¢‡∏ì‡∏¥‡∏ä‡∏Å‡∏∏‡∏• ‡∏†‡∏±‡∏ó‡∏£‡∏ó‡∏ß‡∏µ‡∏£‡∏±‡∏ï‡∏£‡πå</div>
            <div class="team-role">Full Stack Developer</div>
            <button
              class="btn-team-chat"
              onclick="
                startChatWithUser('team_sunny', '‡∏ì‡∏¥‡∏ä‡∏Å‡∏∏‡∏•', 'images/Sunny.jpg')
              "
            >
              <i class="fas fa-comment-dots"></i> ‡πÅ‡∏ä‡∏ó‡πÄ‡∏•‡∏¢
            </button>
          </div>

          <div class="team-card">
            <img
              src="images/Pawanrat.jpg"
              class="team-img"
              alt="Pawanrat"
              onerror="
                this.src =
                  'https://cdn-icons-png.flaticon.com/512/4140/4140047.png'
              "
            />
            <div class="team-name">‡∏ô.‡∏™.‡∏õ‡∏ß‡∏±‡∏ô‡∏£‡∏±‡∏ï‡∏ô‡πå ‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡∏®‡∏£‡∏µ‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì</div>
            <div class="team-role">Database Administrator</div>
            <button
              class="btn-team-chat"
              onclick="
                startChatWithUser(
                  'team_pawanrat',
                  '‡∏õ‡∏ß‡∏±‡∏ô‡∏£‡∏±‡∏ï‡∏ô‡πå',
                  'images/Pawanrat.jpg',
                )
              "
            >
              <i class="fas fa-comment-dots"></i> ‡πÅ‡∏ä‡∏ó‡πÄ‡∏•‡∏¢
            </button>
          </div>
        </div>
      </div>

      <div
        class="content-box"
        style="background: #fffdf5; border: 1px solid #ffeeba"
      >
        <div class="section-title" style="color: #fbc02d">
          <i class="fas fa-chalkboard-teacher"></i> ‡∏Ñ‡∏£‡∏π‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏Ç‡∏≠‡∏á‡∏û‡∏ß‡∏Å‡πÄ‡∏£‡∏≤
        </div>
        <div class="advisor-section">
          <div class="team-card advisor-card">
            <img
              src="images/Taweep.jpg"
              class="team-img"
              alt="Teacher"
              onerror="
                this.src =
                  'https://cdn-icons-png.flaticon.com/512/3135/3135715.png'
              "
            />
            <div class="team-name">‡∏ô‡∏≤‡∏¢‡∏ó‡∏ß‡∏µ‡∏õ ‡∏ô‡∏ß‡∏Ñ‡∏∏‡∏ì‡∏≤‡∏ô‡∏ô‡∏ó‡πå</div>
            <div class="team-role">‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡∏ç‡πà</div>
            <p style="margin-top: 10px; font-size: 13px; color: #777">
              ‡∏ú‡∏π‡πâ‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏±‡∏Å‡∏î‡∏±‡∏ô‡πÉ‡∏´‡πâ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏£‡∏¥‡∏á
            </p>
            <button
              class="btn-team-chat"
              onclick="
                startChatWithUser('team_taweep', '‡∏≠.‡∏ó‡∏ß‡∏µ‡∏õ', 'images/Taweep.jpg')
              "
            >
              <i class="fas fa-comment-dots"></i> ‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°
            </button>
          </div>
        </div>
      </div>

      <div class="content-box" style="text-align: center">
        <div class="section-title">
          <i class="fas fa-envelope-open-text"></i> ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô
        </div>
        <p style="color: #666; margin-bottom: 20px">
          ‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞ ‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà
        </p>

        <div class="contact-container">
          <div class="contact-pill">
            <i class="fab fa-facebook" style="color: #ff2d78"></i> StudyGroup
            Official
          </div>
          <div class="contact-pill">
            <i class="fas fa-envelope" style="color: #ff2d78"></i>
            sby_37380@sby.ac.th
          </div>
          <div class="contact-pill">
            <i class="fas fa-phone-alt" style="color: #ff2d78"></i> 085-586-6661
          </div>
        </div>
      </div>
    </div>

    <div class="chat-toggle-btn" onclick="toggleChat()">
      <i class="fas fa-comment-dots"></i>
    </div>

    <div class="chat-box" id="chatBox">
      <div class="chat-header">
        <div class="chat-header-user">
          <i
            class="fas fa-arrow-left chat-back-btn"
            id="chatBackBtn"
            onclick="backToInbox()"
          ></i>
          <span id="chatTitle">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</span>
        </div>
        <span class="chat-close" onclick="toggleChat()">√ó</span>
      </div>

      <div class="view-section" id="inboxView">
        <div class="inbox-list" id="inboxList">
          <div style="text-align: center; padding: 20px; color: #999">
            ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...
          </div>
        </div>
      </div>

      <div class="view-section" id="chatView" style="display: none">
        <div class="chat-messages" id="chatMessages"></div>
        <div class="chat-input-area">
          <input
            type="text"
            id="chatInput"
            class="chat-input"
            placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°..."
            onkeypress="handleEnter(event)"
          />
          <button class="chat-send-btn" onclick="sendPrivateMessage()">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>
    </div>

    <script>
      const BASE_API = "http://localhost:3000";

      // --- 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Login / Notification ---
      document.addEventListener("DOMContentLoaded", () => {
        checkLoginStatus();

        if (localStorage.getItem("currentUser")) {
          loadNotifications();
          setInterval(loadNotifications, 5000);
        }

        window.addEventListener("click", (e) => {
          const notiContainer = document.getElementById("notiContainer");
          if (notiContainer && !notiContainer.contains(e.target)) {
            const dropdown = document.getElementById("notiDropdown");
            if (dropdown) dropdown.classList.remove("active");
          }
        });
      });

      function checkLoginStatus() {
        const userJson = localStorage.getItem("currentUser");
        const navRight = document.getElementById("navRightContent");
        const template = document.getElementById("loggedInTemplate");

        if (userJson && template) {
          const user = JSON.parse(userJson);
          const content = template.content.cloneNode(true);
          navRight.innerHTML = "";
          navRight.appendChild(content);

          const userNameEl = document.getElementById("userName");
          const userAvatarEl = document.getElementById("userAvatar");

          if (userNameEl) userNameEl.textContent = user.username || user.name;
          if (userAvatarEl) {
            userAvatarEl.src =
              user.avatar && user.avatar.length > 10
                ? user.avatar
                : "https://cdn-icons-png.flaticon.com/512/149/149071.png";
          }
        }
      }

      function logout() {
        Swal.fire({
          title: "‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö?",
          icon: "question",
          showCancelButton: true,
          confirmButtonColor: "#fa4299",
          cancelButtonText: "‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",
          confirmButtonText: "‡πÉ‡∏ä‡πà, ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö",
        }).then((result) => {
          if (result.isConfirmed) {
            localStorage.removeItem("currentUser");
            window.location.reload();
          }
        });
      }

      // --- Notification Logic ---
      function toggleNotification(event) {
        if (event) event.stopPropagation();
        const dropdown = document.getElementById("notiDropdown");
        if (dropdown) dropdown.classList.toggle("active");
      }

      async function loadNotifications() {
        const userJson = localStorage.getItem("currentUser");
        if (!userJson) return;
        const user = JSON.parse(userJson);
        const list = document.getElementById("notiList");
        const badge = document.getElementById("notiCount");

        try {
          if (!list) return;
          const res = await fetch(
            `${BASE_API}/api/notifications?userId=${user.id}`,
          );
          const notifications = await res.json();

          if (!Array.isArray(notifications)) return;

          const unreadCount = notifications.filter((n) => !n.read).length;
          if (unreadCount > 0) {
            badge.style.display = "flex";
            badge.textContent = unreadCount > 9 ? "9+" : unreadCount;
          } else {
            badge.style.display = "none";
          }

          if (notifications.length === 0) {
            list.innerHTML = '<div class="no-noti">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</div>';
          } else {
            list.innerHTML = notifications
              .map(
                (item) => `
                    <div class="noti-item ${item.read ? "" : "unread"}">
                        <img src="${item.senderAvatar || "https://cdn-icons-png.flaticon.com/512/149/149071.png"}" class="noti-avatar">
                        <div style="flex:1">
                            <div class="noti-text">
                                <strong>${item.senderName}</strong> ${item.message}
                            </div>
                            <span class="noti-time">${item.time}</span>
                        </div>
                    </div>
                `,
              )
              .join("");
          }
        } catch (error) {
          console.error("‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à", error);
        }
      }

      async function markAllRead() {
        const badge = document.getElementById("notiCount");
        if (badge) badge.style.display = "none";
        const unreadItems = document.querySelectorAll(".noti-item.unread");
        unreadItems.forEach((item) => {
          item.classList.remove("unread");
          item.style.backgroundColor = "white";
          item.style.borderLeft = "none";
        });

        const userJson = localStorage.getItem("currentUser");
        if (!userJson) return;
        const user = JSON.parse(userJson);

        try {
          await fetch(`${BASE_API}/api/notifications/mark-read`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ userId: user.id }),
          });
        } catch (err) {
          console.error("Error mark read", err);
        }
      }

      // ===============================================
      // üí¨ PRIVATE CHAT LOGIC (IG Style)
      // ===============================================
      let isChatOpen = false;
      let chatInterval = null;
      let currentChatPartner = null;

      function toggleChat() {
        const box = document.getElementById("chatBox");
        const userJson = localStorage.getItem("currentUser");

        if (!userJson) {
          Swal.fire("‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô", "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏ä‡∏ó", "warning");
          return;
        }

        isChatOpen = !isChatOpen;
        box.style.display = isChatOpen ? "flex" : "none";

        if (isChatOpen) {
          // ‡πÄ‡∏õ‡∏¥‡∏î‡∏°‡∏≤‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å ‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î Inbox ‡πÄ‡∏™‡∏°‡∏≠
          backToInbox();
          chatInterval = setInterval(refreshChat, 3000);
        } else {
          clearInterval(chatInterval);
        }
      }

      function refreshChat() {
        if (!isChatOpen) return;
        if (currentChatPartner) {
          loadPrivateMessages();
        } else {
          loadInbox();
        }
      }

      // ‚úÖ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô: ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ä‡∏ó‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô
      function startChatWithUser(id, name, avatar) {
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏π‡πà‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡∏à‡∏≥‡∏•‡∏≠‡∏á
        const partnerObj = {
          partnerId: id,
          partnerName: name,
          partnerAvatar: avatar,
        };

        // ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏ä‡∏ó (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î)
        const box = document.getElementById("chatBox");
        if (box.style.display === "none" || !box.style.display) {
          toggleChat();
        }

        // ‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ä‡∏ó‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        openChat(partnerObj);
      }

      // --- 1. ‡∏´‡∏ô‡πâ‡∏≤ Inbox ---
      async function loadInbox() {
        const user = JSON.parse(localStorage.getItem("currentUser"));
        const inboxList = document.getElementById("inboxList");

        try {
          const res = await fetch(`${BASE_API}/api/chat-inbox/${user.id}`);
          const data = await res.json();

          if (data.length === 0) {
            inboxList.innerHTML = `
                    <div style="text-align:center; padding:40px; color:#aaa;">
                        <i class="far fa-paper-plane" style="font-size:30px; margin-bottom:10px;"></i><br>
                        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°<br>
                        <small>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡πÅ‡∏ä‡∏ó‡πÄ‡∏•‡∏¢" ‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡∏°‡∏á‡∏≤‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô</small>
                    </div>`;
            return;
          }

          inboxList.innerHTML = data
            .map(
              (chat) => `
                <div class="inbox-item" onclick='openChat(${JSON.stringify(chat)})'>
                    <img src="${chat.partnerAvatar || "https://via.placeholder.com/40"}" class="inbox-avatar">
                    <div class="inbox-info">
                        <div class="inbox-name">${chat.partnerName}</div>
                        <div class="inbox-last-msg">${chat.lastMessage}</div>
                    </div>
                </div>
            `,
            )
            .join("");
        } catch (error) {
          console.error("Load inbox error", error);
        }
      }

      // --- 2. ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏ó (Open Chat) ---
      function openChat(partner) {
        // ‚úÖ Normalize ID (‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏à‡∏≤‡∏Å Inbox ‡πÅ‡∏•‡∏∞‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Ñ‡∏ô)
        const pId = partner.partnerId || partner.id;
        const pName = partner.partnerName || partner.name;
        const pAvatar =
          partner.partnerAvatar ||
          partner.avatar ||
          "https://via.placeholder.com/30";

        currentChatPartner = {
          partnerId: pId,
          partnerName: pName,
          partnerAvatar: pAvatar,
        };

        // ‡∏™‡∏•‡∏±‡∏ö UI
        document.getElementById("inboxView").style.display = "none";
        document.getElementById("chatView").style.display = "flex";
        document.getElementById("chatBackBtn").style.display = "block";

        // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠
        document.getElementById("chatTitle").innerHTML = `
            <img src="${pAvatar}" style="width:25px; height:25px; border-radius:50%; vertical-align:middle; object-fit:cover;"> 
            ${pName}`;

        loadPrivateMessages();
        setTimeout(scrollToBottom, 200);
      }

      // --- 3. ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ Inbox ---
      function backToInbox() {
        currentChatPartner = null;
        document.getElementById("inboxView").style.display = "flex";
        document.getElementById("chatView").style.display = "none";
        document.getElementById("chatBackBtn").style.display = "none";
        document.getElementById("chatTitle").textContent = "‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°";
        loadInbox();
      }

      // --- 4. ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ä‡∏ó ---
      async function loadPrivateMessages() {
        if (!currentChatPartner) return;
        const user = JSON.parse(localStorage.getItem("currentUser"));
        const container = document.getElementById("chatMessages");

        try {
          const res = await fetch(
            `${BASE_API}/api/private-chat/${user.id}/${currentChatPartner.partnerId}`,
          );
          const messages = await res.json();

          const isAtBottom =
            container.scrollHeight - container.scrollTop <=
            container.clientHeight + 100;

          container.innerHTML = messages
            .map((msg) => {
              const isMe = String(msg.fromId) === String(user.id);
              return `
                    <div class="msg-row ${isMe ? "me" : "other"}">
                        ${!isMe ? `<img src="${msg.senderAvatar || "https://via.placeholder.com/30"}" class="msg-avatar">` : ""}
                        <div>
                            <div class="msg-bubble">${msg.message}</div>
                        </div>
                    </div>
                `;
            })
            .join("");

          if (isAtBottom) scrollToBottom();
        } catch (err) {
          console.error("Chat Error:", err);
        }
      }

      // --- 5. ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ---
      async function sendPrivateMessage() {
        if (!currentChatPartner) return;

        const input = document.getElementById("chatInput");
        const text = input.value.trim();
        if (!text) return;

        const user = JSON.parse(localStorage.getItem("currentUser"));

        try {
          await fetch(`${BASE_API}/api/private-chat`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              fromId: user.id,
              toId: currentChatPartner.partnerId,
              message: text,
              senderName: user.username || user.name,
              senderAvatar: user.avatar,
            }),
          });
          input.value = "";
          loadPrivateMessages();
          scrollToBottom();
        } catch (e) {
          console.log("‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ");
        }
      }

      function handleEnter(e) {
        if (e.key === "Enter") sendPrivateMessage();
      }

      function scrollToBottom() {
        const container = document.getElementById("chatMessages");
        container.scrollTop = container.scrollHeight;
      }
    </script>
  </body>
</html>
